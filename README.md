
## üá∫üá¶ UaGeoSet üá∫üá¶

**UaGeoSet** is a zero-dependency TypeScript/JavaScript library that wraps a pre-compiled JSON snapshot of the Ukrainian administrative-territorial catalogue (KATOTTG) as of 2024. It exposes a simple `GeoAPI` class to query regions, districts, communities, and settlements by their official UA-codes (in KATOTTG style).

### Key Characteristics

- **Zero Dependencies**: Pure TypeScript implementation
- **Lightweight**: Bundles only a minimal, index-based JSON (`raw-kattog.json`), optimized from the original KATOTTG dataset
- **Offline First**: No external network requests‚Äîeverything works offline
- **Type-Safe**: Full TypeScript support with proper interfaces [_Almost_]
- **Universal**: Works in both Node.js and browser environments

### Data Coverage

The library provides access to the complete Ukrainian administrative hierarchy:
- Regions (–û–±–ª–∞—Å—Ç—ñ) and AR Crimea
- Districts (–†–∞–π–æ–Ω–∏)
- Communities (–ì—Ä–æ–º–∞–¥–∏)
- Settlements (–ù–∞—Å–µ–ª–µ–Ω—ñ –ø—É–Ω–∫—Ç–∏)

> üí° The optimization process reduces the original dataset size while maintaining all essential information and relationships.


## Table of Contents:
1. [üìä Data Source](#-data-source)
    - [Data Processing Pipeline](#data-processing-pipeline)  
2. [Features](#features)  
3. [Installation](#installation)  
4. [Data Model & Categories](#data-model--categories)  
    - [The KATOTTG to API Categories Table](#the-katottg-to-api-categories-table)
5. [üßë‚Äçüíª Basic Usage](#-basic-usage)  
   - [Initializing the API](#initializing-the-api)  
   - [Regions](#regions)  
   - [Districts](#districts)  
   - [Communities](#communities)  
   - [Settlements](#settlements)  
   - [Search Examples](#search-examples)  
6. [Folder Structure](#folder-structure)  
7. [CHANGELOG](#changelog)  
8. [License](#license)



## Overview



## üìä Data Source [](#-data-source)
The library is built on top of the official **KATOTTG 2024** dataset, which is maintained by [kaminarifox](https://github.com/kaminarifox/katottg-json). 

### Data Processing Pipeline

1. **Source Data**: Raw KATOTTG JSON from (`src/data/raw-kattog.json`)
2. **Optimization**: Custom script (`scripts/optimize-kattog.ts`) transforms the data into a compact, index-based format
3. **Output**: Optimized JSON (`src/data/kattog.json`) with minimal footprint and fast lookups

> üí° The optimization process reduces the original dataset size (9.7MB -> 2.3MB) while maintaining all essential information and relationships.



## Features

- **Official UA-codes** for every administrative unit (exactly as in KATOTTG).  
- Covers the full hierarchy (2024):
  1. **Regions and AR Crimea** / **–û–±–ª–∞—Å—Ç—ñ —Ç–∞ –ê–≤—Ç–æ–Ω–æ–º–Ω–∞ –†–µ—Å–ø—É–±–ª—ñ–∫–∞ –ö—Ä–∏–º**  
  2. **Cities with special status** / **–ú—ñ—Å—Ç–∞, —â–æ –º–∞—é—Ç—å —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–∏–π —Å—Ç–∞—Ç—É—Å** (e.g. Kyiv, Sevastopol)  
  3. **Districts in regions and AR Crimea** / **–†–∞–π–æ–Ω–∏ –≤ –æ–±–ª–∞—Å—Ç—è—Ö —Ç–∞ –ê–≤—Ç–æ–Ω–æ–º–Ω—ñ–π –†–µ—Å–ø—É–±–ª—ñ—Ü—ñ –ö—Ä–∏–º**  
  4. **Territorial communities** / **–¢–µ—Ä–∏—Ç–æ—Ä—ñ—ó —Ç–µ—Ä–∏—Ç–æ—Ä—ñ–∞–ª—å–Ω–∏—Ö –≥—Ä–æ–º–∞–¥** (names of territorial communities in each oblast, including Crimea)  
  5. **Cities** / **–ú—ñ—Å—Ç–∞**  
  6. **Urban-type settlements** / **–°–ú–¢** (deprecated; now treated under **"C–µ–ª–∏—â–∞"**)  
  7. **Villages** / **–°–µ–ª–∞**  
  8. **Settlements** / **–°–µ–ª–∏—â–∞**  
  9. **City districts** / **–†–∞–π–æ–Ω–∏ –≤ –º—ñ—Å—Ç–∞—Ö**  
- **Lightweight**: index-based JSON, no redundant fields, minimal footprint.  
- Fully TypeScript-typed: you get `Region`, `District`, `Community`, and `Settlement` interfaces, each with its UA-code, name, category, and parent/children relationships.  
- No runtime dependencies‚Äîsuitable for both browser and Node.js.



## Installation

Using **npm** (preferred):

```bash
npm add ua-geo-set
```

Or with npm:

```bash
npm install ua-geo-set
```

Yarn:
```
yarn add ua-geo-set
```

## Data Model & Categories

The 2024 KATOTTG hierarchy is represented by a single JSON (`raw-kattog.json`) with two arrays:

1. `indexToCode: string[]`
   - Maps each numeric index to a UA-code (e.g. "UA02000000000045678")
2. `items: RawItem[]`
   - Each `RawItem` contains:
     - `name: string` ‚Äì the official name (e.g., "–í—ñ–Ω–Ω–∏—Ü—å–∫–∞ –æ–±–ª–∞—Å—Ç—å", "–ö–∏—ó–≤")
     - `category: CategoryCode` ‚Äì one of { O, K, P, H, C, X, M, B }
     - `parent?: number` ‚Äì numeric index of its parent (if any)
     - `children?: number[]` ‚Äì array of numeric indices of its children (if any)
     - `independent?: boolean` ‚Äì set to true for "independent" city-regions (K) like Kyiv and Sevastopol

#### The KATOTTG to API Categories Table:

| Code | Alias | Description (Ukrainian) | Description (English) | Notes |
|------|-------|----------------|----------------------|-------|
| O | Region | –û–±–ª–∞—Å—Ç—ñ —Ç–∞ –ê–† –ö—Ä–∏–º | Regions and  AR Crimea  | Top-level regions |
| K | CitySpecial [Settlements] |–ú—ñ—Å—Ç–∞ –∑—ñ —Å–ø–µ—Ü. —Å—Ç–∞—Ç—É—Å–æ–º | Cities with special status | Treated as both Region & Settlement |
| P | District | –†–∞–π–æ–Ω–∏ –≤ –æ–±–ª–∞—Å—Ç—è—Ö —Ç–∞ –ê–† –ö—Ä–∏–º | Districts in regions and AR Crimea | District of an oblast |
| H | Community | –¢–µ—Ä–∏—Ç–æ—Ä—ñ–∞–ª—å–Ω—ñ –≥—Ä–æ–º–∞–¥–∏ | Territorial communities | –êssociation of small settlements|
| M | City [Settlements] | –ú—ñ—Å—Ç–∞ | –°ities | Basically, it's about second-tier cities.  |
| X | Urban [Settlements] | –°–µ–ª–∏—â–∞ | Urbans* | Urban-type settlement category folded |
| C | Village [Settlements] | –°–µ–ª–∞ | Villages | Common village type |
| B | DistrictCity [Settlements] | –†–∞–π–æ–Ω–∏ –≤ –º—ñ—Å—Ç–∞—Ö | City districts | Urban district (e.g. "–°–≤—è—Ç–æ—à–∏–Ω—Å—å–∫–∏–π") |

> Note: The older "–°–µ–ª–∏—â–∞ –º—ñ—Å—å–∫–æ–≥–æ —Ç–∏–ø—É" (category **T**) _has been deprecated_ and merged into category X.

## üßë‚Äçüíª Basic Usage [](#-basic-usage)

#### Initializing the API:

```typescript
import { GeoAPI } from "ua-geo-set";

const geo = new GeoAPI();
```

#### Regions:

```typescript
// Get all regions (categories O + K)
const regions = geo.getAllRegions();

// Find a specific region by UA-code
const vinnitsa = geo.getRegionById("UA02000000000045678");
console.log(vinnitsa?.name); // "–í—ñ–Ω–Ω–∏—Ü—å–∫–∞ –æ–±–ª–∞—Å—Ç—å"

// Find "Kyiv" (a special-status city) in regions
const kyivRegion = regions.find(r => r.name === "–ö–∏—ó–≤");
console.log(kyivRegion?.id); // "UA80000000000093317"
```

Each `Region` object has:
```typescript
  interface Region {
  id: string;                     // UA-code, e.g. "UA02000000000045678"
  name: string;                   // e.g. "–í—ñ–Ω–Ω–∏—Ü—å–∫–∞ –æ–±–ª–∞—Å—Ç—å" or "–ö–∏—ó–≤"
  category: CategoryBase;         // "Region" or "CitySpecial"
  nameFull: string;               // e.g. "–í—ñ–Ω–Ω–∏—Ü—å–∫–∞ –æ–±–ª–∞—Å—Ç—å"
  districts: RegionChild[];
}
```

#### Districts:

```typescript
// Get all region's districts
const allRegionDistricts = geo.getAllRegionDistricts();

// Get all cities districts
const allCitiesDistricts = geo.getAllCityDistricts();

// Get Any District by id
const district = geo.getDistrictById("UA80000000000875983"); // "–°–≤—è—Ç–æ—à–∏–Ω—Å—å–∫–∏–π —Ä-–Ω" –º—ñ—Å—Ç–∞ –ö–∏—ó–≤


// Get only districts belonging to a given region
const vinnytsiaDistricts = geo.getAllRegionDistricts("UA05000000000010236");
vinnytsiaDistricts.forEach(d => console.log(d.name));

// For a city district ("B"), regionId will be the city-code
const kyivDistricts = geo.getAllCityDistricts("UA80000000000093317");
console.log(kyivDistricts.map(d => d.name));
```

Each `District`:
```typescript
interface District {
  id: string;                      // UA-code of the district
  name: string;                    // e.g. "–ë–∞—Ö—á–∏—Å–∞—Ä–∞–π—Å—å–∫–∏–π" or "–°–≤—è—Ç–æ—à–∏–Ω—Å—å–∫–∏–π"
  category: CategoryBase;          // "District" or "DistrictCity"
  nameFull: string;                // e.g. "–ë–∞—Ö—á–∏—Å–∞—Ä–∞–π—Å—å–∫–∏–π —Ä–∞–π–æ–Ω"
  regionId: string;                // UA-code of parent (oblast or city)
  communities: DistrictChild}[];
}
```

#### Communities:

```typescript
// Get all communities
const communities = geo.getAllCommunities();

// Filter by district
const nikopolsDistrictkaComms = geo.getAllCommunities("UA12080000000023578");

// Search by partial name
const nikop = geo.searchCommunitiesByName("–ù—ñ–∫–æ–ø");
console.log(nikop.map(c => c.name)); // ["–ù—ñ–∫–æ–ø–æ–ª—å—Å—å–∫–∞"]
```

Each `Community`:
```typescript
interface Community {
  id: string;                     // UA-code
  name: string;                   // e.g. "–ê–Ω–¥—Ä—ñ—ó–≤—Å—å–∫–∞"
  category: CategoryBase;         // "Community"
  nameFull: string;               // "–ê–Ω–¥—Ä—ñ—ó–≤—Å—å–∫–∞ —Ç–µ—Ä–∏—Ç–æ—Ä—ñ–∞–ª—å–Ω–∞ –≥—Ä–æ–º–∞–¥–∞"
  districtId: string;             // UA-code of parent district
  regionId: string;               // UA-code of parent oblast or city
  settlements: CommunityChild[];
}
```

#### Settlements:

```typescript
// Get all settlements
const allSettlements = geo.getAllSettlements();

// Filter by region, district, or community
const poltavasSettlements = geo.getAllSettlements({ regionId: "UA53000000000028050" });
const bahchisarayskiyDistrictSettlements = geo.getAllSettlements({ districtId: "UA01020000000022387" });
const nikopolskaComms = geo.getAllSettlements({ communityId: "UA12080050000062712" });

// Search by partial name
const barSettlements = geo.searchSettlementsByName("–ë–∞—Ä");
console.log(barSettlements.map(s => s.name)); 

// Fetch a single settlement by UA-code
const andriyivka = geo.getSettlementById("UA12140250020066759");
console.log(andriyivka?.name); // —Å–µ–ª–æ "–ê–Ω–¥—Ä—ñ—ó–≤–∫–∞"
```

Each `Settlement`:
```typescript
interface Settlement {
  id: string;               // UA-code
  name: string;             // e.g. "–ê–Ω–¥—Ä—ñ—ó–≤–∫–∞", "–ö–∏—ó–≤"
  category: string;         // "City" | "CitySpecial" | "Urban" | "Village" | 
  nameFull: string;         // e.g. "–ê–Ω–¥—Ä—ñ—ó–≤–∫–∞ —Å–µ–ª–æ"
  parentId: string | null;  // UA-code of parent (community or district)
  parentType:               // one of:
    | KattogStructureType.Community 
    | KattogStructureType.District 
    | null;
  regionId: string | null;  // UA-code of oblast or city for urban districts
}
```

#### Search Examples:

```typescript
// [Temp solution] Search regions by name
const region = geo.getAllRegions().find((r) => r.name === cityName);
getAllDistricts
// Search districts by name
const district = geo.getAllRegions().find((r) => r.name === regionDistrictName);
console.log(barDistricts.map(d => d.name)); // ["–ë–∞—Ä—Å—å–∫–∏–π —Ä–∞–π–æ–Ω"]

// Search communities by name
const andriyivkaComms = geo.searchCommunitiesByName("–ê–Ω–¥—Ä—ñ—ó–≤—Å—å–∫–∞");
console.log(andriyivkaComms.map(c => c.name)); // ["–ê–Ω–¥—Ä—ñ—ó–≤—Å—å–∫–∞ —Ç–µ—Ä–∏—Ç–æ—Ä—ñ–∞–ª—å–Ω–∞ –≥—Ä–æ–º–∞–¥–∞"]

// Search settlements by name
const barSettlements = geo.searchSettlementsByName("–ë–∞—Ä");
console.log(barSettlements.map(s => s.name)); // ["–ë–∞—Ä", "–ë–∞—Ä–æ–∫", "–ë–∞—Ä—Å—å–∫–µ", ...]
```


## üå≥ Folder Structure
```
ua-geo-set/
‚îú‚îÄ src/
‚îÇ ‚îú‚îÄ data/
‚îÇ ‚îÇ ‚îî‚îÄ raw-kattog.json # Compact, index-based JSON (KATOTTG 2024)
‚îÇ ‚îú‚îÄ lib/
‚îÇ ‚îÇ ‚îú‚îÄ enums.ts # CategoryCode, CategoryBase, KattogStructureType
‚îÇ ‚îÇ ‚îú‚îÄ types.ts # RawItem, RawOptimizedData, Region, etc.
‚îÇ ‚îÇ ‚îú‚îÄ normalize.ts # normalizeRegion/District/Community/Settlement
‚îÇ ‚îÇ ‚îú‚îÄ mappers.ts # Mapping CategoryCode ‚Üí suffix/postfix
‚îÇ ‚îÇ ‚îî‚îÄ geo-api.ts # GeoAPI class
‚îÇ ‚îî‚îÄ index.ts # (optional) re-export of GeoAPI
‚îú‚îÄ tests/
‚îÇ ‚îî‚îÄ geo-api.test.ts # Jest tests for GeoAPI
‚îú‚îÄ scripts/
‚îÇ ‚îî‚îÄ convert-kattog.ts # Script to generate raw-kattog.json from kattog.json
‚îú‚îÄ README.md
‚îú‚îÄ CHANGELOG.md
‚îú‚îÄ package.json
‚îî‚îÄ tsconfig.json
```

## CHANGELOG

Please see [CHANGELOG.md]('./CHANGELOG.md') for a detailed list of changes and version history.

## License

This project is licensed under the MIT License. See [LICENSE]('./LICENSE') for details.